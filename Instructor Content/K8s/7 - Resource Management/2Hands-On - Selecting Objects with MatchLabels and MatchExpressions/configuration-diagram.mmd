graph TB
    subgraph Deployment["<b>Deployment: color-api-deployment</b><br/>(color-deploy.yaml)"]
        D1["<b>Spec Configuration</b><br/>Replicas: 3"]
        D2["<b>Pod Selector</b>"]
        D2a["<b>MatchLabels</b><br/>✓ app: color-api<br/>✓ environment: local<br/>✓ tier: backend"]
        D2b["<b>MatchExpressions</b><br/>✓ managed key Exists"]
        D3["<b>Pod Template</b><br/>Creates pods with matching labels"]
        D4["<b>Container: color-backend</b><br/>Image: lironefitoussi/color-api:1.1.0<br/>Port: 80"]
    end

    subgraph Pods["<b>Standalone Pods</b><br/>(color-api.yaml)"]
        P1["<b>Pod: color-backend</b><br/>Labels:<br/>• app: color-api<br/>• environment: local<br/>• tier: backend<br/><br/>Container: color-api:1.1.0<br/>Port: 80"]
        P2["<b>Pod: color-frontend</b><br/>Labels:<br/>• app: color-api<br/>• environment: local<br/>• tier: frontend<br/><br/>Container: nginx:1.27.0<br/>Port: 80"]
    end

    subgraph Matching["<b>Selector Matching Analysis</b>"]
        M1["<b>color-backend Pod</b><br/>✓ Matches deployment selector<br/>- Has all required MatchLabels<br/>- Has managed key (Exists check)<br/>⚠️ Note: No managed label shown"]
        M2["<b>color-frontend Pod</b><br/>✗ Does NOT match selector<br/>- tier: frontend ≠ backend<br/>- Missing managed key"]
    end

    D1 --> D2
    D2 --> D2a
    D2 --> D2b
    D1 --> D3
    D3 --> D4

    P1 -.->|Compare| M1
    P2 -.->|Compare| M2

    style Deployment fill:#e1f5ff
    style D1 fill:#fff3e0
    style D2 fill:#f3e5f5
    style D2a fill:#e8f5e9
    style D2b fill:#fce4ec
    style D3 fill:#fff9c4
    style D4 fill:#f1f8e9

    style Pods fill:#ffe0b2
    style P1 fill:#c8e6c9
    style P2 fill:#ffccbc

    style Matching fill:#f3e5f5
    style M1 fill:#c8e6c9
    style M2 fill:#ffccbc
